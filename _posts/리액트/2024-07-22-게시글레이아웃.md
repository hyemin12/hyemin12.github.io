---
title: ë¦¬ì•¡íŠ¸ ê°„ë‹¨í•œ ê¸°ëŠ¥ êµ¬í˜„í•´ë³´ê¸°
date: 2024-07-22 13:24:00 +09:00
categories: ["í”„ë ˆì„ì›Œí¬", "ë¦¬ì•¡íŠ¸"]
tags: []
toc: true
toc_sticky: true
---

ë¦¬ì•¡íŠ¸ë¡œ ê²Œì‹œë¬¼ ì •ë ¬ ë° ì¢‹ì•„ìš” ê¸°ëŠ¥ êµ¬í˜„í•˜ê¸°

## ìš”êµ¬ì‚¬í•­

### ê¸°ëŠ¥

1. ìµœê·¼ ë“±ë¡ìˆœ(ìµœì‹  ê²Œì‹œë¬¼ë¶€í„° ì˜¤ë˜ëœ ê²Œì‹œë¬¼ ìˆœìœ¼ë¡œ ì •ë ¬), ì¡°íšŒìˆœìœ¼ë¡œ ì •ë ¬ì‹œí‚¤ê¸°
2. ì¢‹ì•„ìš” ê¸°ëŠ¥ (ì¢‹ì•„ìš”ë¥¼ ëˆ„ë¥´ë©´ ì¢‹ì•„ìš” ìˆ˜ ë³€ê²½ ë° ì¢‹ì•„ìš” UI ë³€ê²½)

### ì¡°ê±´

- mock dataë¥¼ ì‚¬ìš©

## êµ¬í˜„

### 1. ìµœê·¼ ë“±ë¡ìˆœ, ì¡°íšŒìˆœìœ¼ë¡œ ì •ë ¬ì‹œí‚¤ê¸°

ì£¼ì–´ì§„ html ì½”ë“œ

```js
<div>
  <select id="sort_type">
    <option value="1">ìµœê·¼ë“±ë¡ìˆœ</option>
    <option value="2">ì¡°íšŒìˆœ</option>
  </select>
</div>
```

#### #ë³€ê²½ë˜ëŠ” ì •ë ¬ íƒ€ì…(ìµœê·¼ ë“±ë¡ìˆœ, ì¡°íšŒìˆœ)ì„ ë‹´ì„ ë³€ìˆ˜ ë§Œë“¤ê¸°

```ts
const [sortType, setSortType] = useState<number>(1);
```

#### #selectì— onChange ì ìš©í•˜ê¸°

```js
<div>
  <select id="sort_type" onChange={(e) => setSortType(Number(e.target.value))}>
    <option value="1">ìµœê·¼ë“±ë¡ìˆœ</option>
    <option value="2">ì¡°íšŒìˆœ</option>
  </select>
</div>
```

#### #ì •ë ¬í•˜ëŠ” í•¨ìˆ˜ ë§Œë“¤ê¸°

switchë¬¸ì„ ì‚¬ìš©í•´ì„œ idë³„ë¡œ ì •ë ¬í•˜ëŠ” ë¡œì§ ì‘ì„±

```typescript
const sortedData = (data: ICard[]) => {
  const copyData = [...data];
  switch (sortType) {
    case 1:
      return copyData.sort(
        (a, b) =>
          new Date(b.created_at).getTime() - new Date(a.created_at).getTime()
      );
    case 2:
      return copyData.sort((a, b) => b.views - a.views);
    default:
      return data;
  }
};
```

#### #ê²Œì‹œê¸€ì„ í‘œì‹œí•  ë•Œ ì •ë ¬ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬, ì •ë ¬ëœ ê²Œì‹œê¸€ì„ í‘œì‹œí•  ìˆ˜ ìˆë„ë¡ í•˜ê¸°

```typescript
<div className="posts-container">
  {sortedData(sortData).map((post) => (
    <Card {...post} key={post.id} handleToggleLiked={handleToggleLiked} />
  ))}
</div>
```

### 2. ì¢‹ì•„ìš” ê¸°ëŠ¥ (ì¢‹ì•„ìš”ë¥¼ ëˆ„ë¥´ë©´ ì¢‹ì•„ìš” ìˆ˜ ë³€ê²½ ë° ì¢‹ì•„ìš” UI ë³€ê²½)

#### #ì¢‹ì•„ìš” ì—¬ë¶€ì— ë”°ë¼ ë‹¤ë¥¸ UI í‘œì‹œí•˜ê¸°

```js
<p className="card-liked">{liked ? "ğŸ‘" : "ğŸ‘"}</p>
```

#### #ì¢‹ì•„ìš” ê¸°ëŠ¥ ë§Œë“¤ê¸°

mock dataë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì—, mock dataë¥¼ ë°˜ë³µí•´ì„œ ëŒë©´ì„œ ìƒíƒœ ë³€ê²½

```js
const handleToggleLiked = (id: number) => {
  const newData = sortData.map((post) =>
    post.id === id
      ? {
          ...post,
          liked: !post.liked,
          likes: !post.liked ? post.likes + 1 : post.likes - 1
        }
      : post
  );

  setSortData(newData);
};
```

## ìƒê°í•´ë³´ë©´ ì¢‹ì€ í¬ì¸íŠ¸

### ì •ë ¬ëœ ë°ì´í„° ìµœì í™”

- useMemoë¥¼ ì‚¬ìš©í•˜ì—¬ ì •ë ¬ëœ ë°ì´í„°ë¥¼ ë©”ëª¨

```typescript
const [sortType, setSortType] = useState<number>(1);

const sortedData = useMemo(() => {
  const copyData = [...sortData];
  switch (sortType) {
    case 1:
      return copyData.sort(
        (a, b) =>
          new Date(b.created_at).getTime() - new Date(a.created_at).getTime()
      );
    case 2:
      return copyData.sort((a, b) => b.views - a.views);
    default:
      return copyData;
  }
}, [sortData, sortType]);
```

- useEffectë¥¼ ì‚¬ìš©í•´ì„œ sortTypeê°€ ë³€ê²½ë˜ì—ˆì„ ë•Œë§Œ ì¬ë Œë”í•˜ê¸°

```typescript
const [sortedData, setSortedData] = useState<ICard[]>([]);
const [sortType, setSortType] = useState<number>(1);

useEffect(() => {
  const handleSortData = (data: ICard[]) => {
    const copyData = [...data];
    switch (sortType) {
      case 1:
        return copyData.sort(
          (a, b) =>
            new Date(b.created_at).getTime() - new Date(a.created_at).getTime()
        );
      case 2:
        return copyData.sort((a, b) => b.views - a.views);
      default:
        return data;
    }
  };
  setSortedData(handleSortData(dbData));
}, [sortType]);
```

ë‹¨ìˆœí•œ ì •ë ¬ ì‘ì—…ì´ë‚˜ ë°ì´í„°ê°€ ë©”ëª¨ë¦¬ì— ë¡œë“œëœ ê²½ìš°ì—ëŠ” `useMemo`, ë°ì´í„°ê°€ ë¹„ë™ê¸°ë¡œ ë¡œë“œë˜ê±°ë‚˜ ì •ë ¬ê³¼ ê´€ë ¨í•´ì„œ ì¶”ê°€ ë¡œì§ë“¤ì„ ì‘ì„±í•´ì•¼í•œë‹¤ë©´ `useEffect`ë¡œ ìµœì í™” í•˜ëŠ” ê²ƒì´ ì¢‹ìŒ!

## ì½”ë“œ

### ì „ì²´ ì½”ë“œ

```js
// App.tsx
import { useState } from "react";
import "./App.css";
import Card, { ICard } from "./components/Card";
import dbData from "./data/data.json";

function App() {
  const [sortData, setSortData] = useState<ICard[]>(dbData ?? []);
  const [sortType, setSortType] = useState<number>(1);

  const sortedData = (data: ICard[]) => {
    const copyData = [...data];
    switch (sortType) {
      case 1:
        return copyData.sort(
          (a, b) =>
            new Date(b.created_at).getTime() - new Date(a.created_at).getTime()
        );
      case 2:
        return copyData.sort((a, b) => b.views - a.views);
      default:
        return data;
    }
  };

  const handleToggleLiked = (id: number) => {
    const newData = sortData.map((post) =>
      post.id === id
        ? {
            ...post,
            liked: !post.liked,
            likes: !post.liked ? post.likes + 1 : post.likes - 1
          }
        : post
    );

    setSortData(newData);
  };

  return (
    <div className="container">
      <div>
        <select
          id="sort_type"
          onChange={(e) => setSortType(Number(e.target.value))}
        >
          <option value="1">ìµœê·¼ë“±ë¡ìˆœ</option>
          <option value="2">ì¡°íšŒìˆœ</option>
        </select>
      </div>
      <div className="posts-container">
        {sortedData(sortData).map((post) => (
          <Card {...post} key={post.id} handleToggleLiked={handleToggleLiked} />
        ))}
      </div>
    </div>
  );
}

export default App;
```

```typescript
// Card.tsx
import "./Card.css";

export interface ICard {
  id: number;
  title: string;
  likes: number;
  created_at: string;
  liked: boolean;
  views: number;
}

interface CardProps extends ICard {
  handleToggleLiked: (id: number) => void;
}

function Card(props: CardProps) {
  const { title, views, created_at, liked, likes, id, handleToggleLiked } =
    props;
  return (
    <li className="card-container" id={`card${id}`}>
      <h2>{title}</h2>
      <p className="card-liked" onClick={() => handleToggleLiked(id)}>
        {liked ? "ğŸ‘" : "ğŸ‘"}
      </p>
      <p>{new Date(created_at).toLocaleString()}</p>
      <div className="card-view-likes">
        <p>ì¢‹ì•„ìš” {likes}</p>
        <p>ì¡°íšŒìˆ˜ {views}</p>
      </div>
    </li>
  );
}
export default Card;
```

### mock data

```js
[
  {
    id: 1,
    title: "ì²« ë²ˆì§¸ ê²Œì‹œê¸€",
    likes: 10,
    created_at: "2024-07-15T10:00:00Z",
    liked: false,
    views: 150
  },
  {
    id: 2,
    title: "ë‘ ë²ˆì§¸ ê²Œì‹œê¸€",
    likes: 5,
    created_at: "2024-07-14T09:30:00Z",
    liked: true,
    views: 200
  },
  {
    id: 3,
    title: "ì„¸ ë²ˆì§¸ ê²Œì‹œê¸€",
    likes: 20,
    created_at: "2024-07-13T08:20:00Z",
    liked: false,
    views: 250
  },
  {
    id: 4,
    title: "ë„¤ ë²ˆì§¸ ê²Œì‹œê¸€",
    likes: 8,
    created_at: "2024-07-12T07:15:00Z",
    liked: true,
    views: 180
  },
  {
    id: 5,
    title: "ë‹¤ì„¯ ë²ˆì§¸ ê²Œì‹œê¸€",
    likes: 15,
    created_at: "2024-07-11T06:10:00Z",
    liked: false,
    views: 300
  },
  {
    id: 6,
    title: "ì—¬ì„¯ ë²ˆì§¸ ê²Œì‹œê¸€",
    likes: 3,
    created_at: "2024-07-10T05:05:00Z",
    liked: true,
    views: 90
  },
  {
    id: 7,
    title: "ì¼ê³± ë²ˆì§¸ ê²Œì‹œê¸€",
    likes: 12,
    created_at: "2024-07-09T04:00:00Z",
    liked: false,
    views: 240
  },
  {
    id: 8,
    title: "ì—¬ëŸ ë²ˆì§¸ ê²Œì‹œê¸€",
    likes: 7,
    created_at: "2024-07-08T03:50:00Z",
    liked: true,
    views: 160
  },
  {
    id: 9,
    title: "ì•„í™‰ ë²ˆì§¸ ê²Œì‹œê¸€",
    likes: 25,
    created_at: "2024-07-07T02:40:00Z",
    liked: false,
    views: 310
  },
  {
    id: 10,
    title: "ì—´ ë²ˆì§¸ ê²Œì‹œê¸€",
    likes: 30,
    created_at: "2024-07-06T01:30:00Z",
    liked: true,
    views: 500
  }
];
```

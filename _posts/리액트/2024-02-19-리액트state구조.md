---
title: ë¦¬ì•¡íŠ¸ state êµ¬ì¡°
date: 2024-02-17 13:24:00 +09:00
categories: ["í”„ë ˆì„ì›Œí¬", "ë¦¬ì•¡íŠ¸"]
tags: []
toc: true
toc_sticky: true
---

## âœ¨ë¦¬ì•¡íŠ¸ state

ì»´í¬ë„ŒíŠ¸ì˜ ë°ì´í„°(ìƒíƒœ)  
í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” useStateë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒíƒœë¥¼ ê´€ë¦¬í•œë‹¤.

### ğŸ“˜`useState()`

```js
import { useState } from "react";

const [state, setState] = useState();
```

- state: ë Œë”ë§ ê°„ì— ë°ì´í„°ë¥¼ ìœ ì§€í•˜ê¸° ìœ„í•œ state ë³€ìˆ˜
- setState: ë³€ìˆ˜ë¥¼ ì—…ë°ì´íŠ¸í•˜ê³ , reactê°€ ì»´í¬ë„ŒíŠ¸ë¥¼ ì¬ë Œë”ë§í•˜ë„ë¡ ë§Œë“œëŠ” state setter í•¨ìˆ˜

### ğŸ“˜state íŠ¹ì§•

#### 1. ì—¬ëŸ¬ ê°œì˜ stateë¥¼ ì§€ì •í•  ìˆ˜ ìˆìŒ

```js
import { useState } from "react";
import data from "./data.js";

function App() {
  const [index, setIndex] = useState(0);
  const [showMore, setShowMore] = useState(false);

  function handleNextClick() {
    setIndex(index + 1);
  }

  function handleMoreClick() {
    setShowMore(!showMore);
  }
  return (
    <div>
      <button onClick={handleNextClick}>Next</button>
      <h2>data[index]</h2>
    </div>
  );
}
```

#### 2. stateëŠ” ê²©ë¦¬ëœë‹¤.

ë™ì¼í•œ ì»´í¬ë„ŒíŠ¸ë¥¼ í•œë²ˆì´ìƒ ë Œë”ë§í•œë‹¤ë©´ ê° ë³µì‚¬ë³¸ì€ ì™„ì „íˆ ë…ë¦½ì ì¸ stateë¥¼ ê°€ì§„ë‹¤. í•œ ê°œì˜ ì»´í¬ë„ŒíŠ¸ì˜ stateë¥¼ ìˆ˜ì •í•´ë„, ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ì—ëŠ” ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•ŠëŠ”ë‹¤.

```js
import Gallery from "./Gallery.js";

function Page() {
  return (
    <div className="Page">
      <Gallery />
      <Gallery />
    </div>
  );
}

function Gallery() {
  const [index, setIndex] = useState(0);
  const [showMore, setShowMore] = useState(false);

  function handleNextClick() {
    setIndex(index + 1);
  }

  function handleMoreClick() {
    setShowMore(!showMore);
  }
  return (
    <div>
      <button onClick={handleNextClick}>Next</button>
      <h2>data[index]</h2>
    </div>
  );
}
```

- ì²«ë²ˆì§¸ Gallery ì»´í¬ë„ŒíŠ¸ì˜ ë²„íŠ¼ì„ ëˆŒëŸ¬ë„, ë‘ë²ˆì§¸ Gallery ì»´í¬ë„ŒíŠ¸ëŠ” ë‹¤ìŒ stateë¥¼ ë³´ì—¬ì£¼ì§€ ì•ŠìŒ

### ğŸ“˜state êµ¬ì¡°í™” ì›ì¹™

#### 1. ì—°ê´€ëœ state ê·¸ë£¹í™”í•˜ê¸°

ë‘ ê°œ ì´ìƒì˜ state ë³€ìˆ˜ê°€ í•­ìƒ ë™ì‹œì— ì—…ë°ì´íŠ¸ ëœë‹¤ë©´, í•˜ë‚˜ì˜ stateë¡œ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ ì¢‹ìŒ

ë§ˆìš°ìŠ¤ ì»¤ì„œë¥¼ ì›€ì§ì´ë©´ ì¢Œí‘œê°€ ì—…ë°ì´íŠ¸ë˜ëŠ” ìƒíƒœë¥¼ ê´€ë¦¬í•  ë•Œì—ëŠ” x, yê°ê°ì˜ stateë¡œ ê´€ë¦¬í•˜ëŠ” ê²ƒë³´ë‹¤ëŠ” í•˜ë‚˜ì˜ stateì—ì„œ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤

```js
// ê°ê° stateë¡œ ê´€ë¦¬
const [x, setX] = useState(0);
const [y, setY] = useState(0);
```

```js
// í•˜ë‚˜ì˜ stateë¡œ ê´€ë¦¬
const [position, setPosition] = useState({ x: 0, y: 0 });
```

#### 2. Stateì˜ ëª¨ìˆœ í”¼í•˜ê¸°

ë‹¨ì¼ ì†ŒìŠ¤ ì§„ì‹¤(Single Source of Truth)  
ì—¬ëŸ¬ê°œì˜ stateë“¤ì´ ëª¨ìˆœë˜ê³ , ë¶ˆì¼ì¹˜ë˜ëŠ” ë°©ì‹ìœ¼ë¡œ stateë¥¼ êµ¬ì„±í•˜ë©´ ì•ˆëœë‹¤. í•˜ë‚˜ì˜ ìƒíƒœë¥¼ ì—¬ëŸ¬ í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ì— ê³µìœ í•¨ìœ¼ë¡œì¨ ëª¨ë“  ìƒíƒœê°€ ì¼ê´€ë˜ê²Œ ìœ ì§€í•´ì•¼í•œë‹¤.

```js
import { useState } from "react";

function FeedbackForm() {
  const [userData, setUserData] = useState({
    username: "",
    email: "",
    age: 0
  });

  const handleUsernameChange = (event) => {
    setUserData({ ...userData, username: event.target.value });
  };

  const handleEmailChange = (event) => {
    setUserData({ ...userData, email: event.target.value });
  };

  const handleAgeChange = (event) => {
    setUserData({ ...userData, age: event.target.value });
  };

  return (
    <div>
      <h1>User Information</h1>
      <form>
        <Input
          inputType="text"
          labelText="Username"
          value={userData.username}
          onChange={handleUsernameChange}
        />
        <br />
        <Input
          inputType="email"
          labelText="Email"
          value={userData.email}
          onChange={handleEmailChange}
        />
        <br />
        <Input
          inputType="number"
          labelText="Age"
          value={userData.age}
          onChange={handleAgeChange}
        />
      </form>
      <div>
        <h2>Preview:</h2>
        <p>Username: {userData.username}</p>
        <p>Email: {userData.email}</p>
        <p>Age: {userData.age}</p>
      </div>
    </div>
  );
}

function Input({ inputType, labelText, value, onChange }) {
  return (
    <label>
      {labelText}:
      <input type={inputType} value={value} onChange={onChange} />
    </label>
  );
}
```

#### 3. ë¶ˆí•„ìš”í•œ state í”¼í•˜ê¸°

- **í•„ìš”í•œ ìƒíƒœë§Œ ê´€ë¦¬í•˜ê¸°**: ìƒíƒœê´€ë¦¬ëŠ” ìµœì†Œí•œìœ¼ë¡œ ìœ ì§€í•´ì•¼ í•¨
- **ê³„ì‚° ê°€ëŠ¥í•œ ë°ì´í„°ëŠ” ìƒíƒœë¡œ ê´€ë¦¬í•˜ì§€ ì•Šê¸°**: ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ì‹œì— í•„ìš”í•œ ë°ì´í„°ë¥¼ ê³„ì‚°í•  ìˆ˜ ìˆë‹¤ë©´ ìƒíƒœë¡œ ê´€ë¦¬í•˜ëŠ”ê²ƒë³´ë‹¤ëŠ”, í•„ìš”í•  ë•Œë§ˆë‹¤ ê³„ì‚°í•˜ëŠ” ê²ƒì´ ë” ë‚˜ìŒ
- **ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ ìƒíƒœ ëŒì–´ì˜¬ë¦¬ê¸°**: ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ê°€ ë™ì¼í•œ ë°ì´í„°ì— ì ‘ê·¼í•˜ëŠ” ê²½ìš°ì—ëŠ” ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì—ì„œ ìƒíƒœê´€ë¦¬í•˜ëŠ” ê²ƒì´ ë‚˜ìŒ
- **ì»´í¬ë„ŒíŠ¸ ê°„ì˜ ìƒíƒœ ë™ê¸°í™” ìµœì†Œí™”í•˜ê¸°**

ì•„ë˜ì˜ ì½”ë“œëŠ” ì´ë¦„(firstName), ì„±(lastName), ì´ë¦„ + ì„±(fullName) 3ê°€ì§€ì˜ ìƒíƒœë¥¼ ê´€ë¦¬í•œë‹¤. ì´ ì¤‘ fullNameì€ firstNameê³¼ lastNameìœ¼ë¡œ ì—°ì‚°í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ë¶ˆí•„ìš”í•œ stateì´ë‹¤.

```js
import { useState } from "react";

function Name() {
  const [firstName, setFirstName] = useState("");
  const [lastName, setLastName] = useState("");
  const [fullName, setFullName] = useState("");

  function handleFirstNameChange(e) {
    setFirstName(e.target.value);
    setFullName(e.target.value + " " + lastName);
  }

  function handleLastNameChange(e) {
    setLastName(e.target.value);
    setFullName(firstName + " " + e.target.value);
  }
  return (
    <div>
      <label>
        First name: <input value={firstName} onChange={handleFirstNameChange} />
      </label>
      <label>
        Last name: <input value={lastName} onChange={handleLastNameChange} />
      </label>
      <h4>FullName is {fullName}</h4>
    </div>
  );
}
```

firstNameê³¼ lastNameì„ ì‚¬ìš©í•´ì„œ fullNameì„ êµ¬í•´ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ ìˆ˜ì •í•  ìˆ˜ ìˆë‹¤.

```js
import { useState } from "react";

function Name() {
  const [firstName, setFirstName] = useState("");
  const [lastName, setLastName] = useState("");

  function handleFirstNameChange(e) {
    setFirstName(e.target.value);
  }

  function handleLastNameChange(e) {
    setLastName(e.target.value);
  }

  const handleFullName = () => {
    return `${firstName} ${lastName}`;
  };

  return (
    <div>
      <label>
        First name: <input value={firstName} onChange={handleFirstNameChange} />
      </label>
      <label>
        Last name: <input value={lastName} onChange={handleLastNameChange} />
      </label>
      <h4>FullName is {handleFullName()}</h4>
    </div>
  );
}
```

#### 4. Stateì˜ ì¤‘ë³µ í”¼í•˜ê¸°

ìƒíƒœì˜ ì¤‘ë³µì´ë€ ë™ì¼í•œ ë°ì´í„°ë¥¼ ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ì—ì„œ ìœ ì§€í•˜ëŠ” ê²ƒì„ ì˜ë¯¸í•˜ê³ ,ìƒíƒœê°€ ì¤‘ë³µì¼ ê²½ìš° ë°ì´í„°ì˜ ë¶ˆì¼ì¹˜ë‚˜ ë¶ˆí•„ìš”í•œ ë³µì¡ì„±ì´ ë°œìƒí•  ìˆ˜ë„ ìˆë‹¤.

- ë‹¨ì¼ ì†ŒìŠ¤ë¡œ ìƒíƒœ ê´€ë¦¬: ìƒíƒœ ê´€ë¦¬ë¥¼ í•œ ê³³ì—ì„œ í•˜ê³  í•„ìš”í•œ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš© (redux,jotai ë“± ìƒíƒœê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©)

```js
import { useState } from "react";

const initialItems = [
  { title: "pretzels", id: 0 },
  { title: "crispy seaweed", id: 1 },
  { title: "granola bar", id: 2 }
];
function Menu() {
  const [items, setItems] = useState(initialItems);
  const [selectedItem, setSelectedItem] = useState(items[0]);

  const handleItemChange = (id, e) => {
    setItems(
      items.map((item) =>
        item.id === id ? { ...item, title: e.target.value } : item
      )
    );
  };
  return (
    <>
      <h2>What's your travel snack?</h2>
      <ul>
        {items.map((item, index) => (
          <li key={item.id}>
            <input
              value={item.title}
              onChange={(e) => {
                handleItemChange(item.id, e);
              }}
            />{" "}
            <button
              onClick={() => {
                setSelectedItem(item);
              }}
            >
              Choose
            </button>
          </li>
        ))}
      </ul>
      <p>You picked {selectedItem.title}.</p>
    </>
  );
}
```

ìœ„ì˜ ì½”ë“œëŠ”

- `items = [{ id: 0, title: 'pretzels'}, ...]`
- `selectedItem = {id: 0, title: 'pretzels'}`

ë¡œ stateê°€ ì¤‘ë³µë˜ì–´ìˆìŠµë‹ˆë‹¤.

`selectedItem`ì— í•´ë‹¹ itemì˜ ëª¨ë“  ë‚´ìš©(`{id: 0, title: 'pretzels'}`)ì„ ë‹´ëŠ” ê²ƒì´ ì•„ë‹Œ, í•´ë‹¹ itemì˜ idë§Œ ë‹´ì•„ í•„ìš”í•œ stateë¥¼ ê³„ì‚°í•´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- items = [{ id: 0, title: 'pretzels'}, ...]
- `setSelectedId = 0`

```js
import { useState } from "react";

const initialItems = [
  { title: "pretzels", id: 0 },
  { title: "crispy seaweed", id: 1 },
  { title: "granola bar", id: 2 }
];
function Menu() {
  const [items, setItems] = useState(initialItems);
  const [selectedId, setSelectedId] = useState(0);

  // ì„ íƒí•œ ì•„ì´í…œ ê³„ì‚°
  const selectedItem = items.find((item) => item.id === selectedId);

  const handleItemChange = (id, e) => {
    setItems(
      items.map((item) =>
        item.id === id ? { ...item, title: e.target.value } : item
      )
    );
  };
  return (
    <>
      <h2>What's your travel snack?</h2>
      <ul>
        {items.map((item, index) => (
          <li key={item.id}>
            <input
              value={item.title}
              onChange={(e) => {
                handleItemChange(item.id, e);
              }}
            />{" "}
            <button
              onClick={() => {
                setSelectedItem(item.id);
              }}
            >
              Choose
            </button>
          </li>
        ))}
      </ul>
      <p>You picked {items.title}.</p>
    </>
  );
}
```

#### 5. ê¹Šê²Œ ì¤‘ì²©ëœ state í”¼í•˜ê¸°

ìƒíƒœì˜ êµ¬ì¡°ê°€ ë³µì¡í•˜ê³  ì¤‘ì²©ë˜ì–´ ìˆì–´ì„œ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ê³  ì—…ë°ì´íŠ¸í•˜ê¸° ì–´ë µê¸°ë•Œë¬¸ì— ì½”ë“œì˜ ìœ ì§€ë³´ìˆ˜ì„±ì´ ë–¨ì–´ì§€ê³ , ë²„ê·¸ê°€ ë°œìƒí•˜ê¸° ì‰½ë‹¤.

- **ë‹¨ìˆœí•œ ìƒíƒœ êµ¬ì¡° ìœ ì§€**: ê¹Šê²Œ ì¤‘ì²©ëœ ìƒíƒœë³´ë‹¤ëŠ” í‰ë©´í™”ëœ ìƒíƒœ êµ¬ì¡°ë¥¼ ì‚¬ìš©
- **ìƒíƒœë¥¼ ë¶„í• í•˜ê³  ì»´í¬ë„ŒíŠ¸ë¡œ ì „ë‹¬**: ê¹Šê²Œ ì¤‘ì²©ëœ ìƒíƒœ ëŒ€ì‹  ìƒìœ„ ì»´í¬ë„ŒíŠ¸ì—ì„œ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ê³  í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ë¡œ í•„ìš”í•œ ë°ì´í„°ë¥¼ ì „ë‹¬
- **ë¶ˆë³€ì„± ìœ ì§€**: ê¹Šì— ì¤‘ì²©ëœ ìƒíƒœì—ì„œ í•˜ìœ„ ê°ì²´ë¥¼ ì§ì ‘ì ìœ¼ë¡œ ë³€ê²½í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ìƒˆë¡œìš´ ê°ì²´ë¥¼ ìƒì„±í•˜ì—¬ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸ í•´ì•¼í•¨
- ì»´í¬ë„ŒíŠ¸ ë¶„ë¦¬: ê´€ë¦¬í•˜ê¸° ì–´ë µë‹¤ë©´, ì»´í¬ë„ŒíŠ¸ë¥¼ ë¶„ë¦¬í•˜ì—¬ ìƒíƒœë¥¼ ê´€ë¦¬ (ë” ì‘ì€ ë‹¨ìœ„ì˜ ìƒíƒœ)

ì°¸ê³ ì‚¬ì´íŠ¸

- [ë¦¬ì•¡íŠ¸ ê³µì‹ë¬¸ì„œ - choosing-the-state-structure](https://ko.react.dev/learn/choosing-the-state-structure)
- [ë¦¬ì•¡íŠ¸ ê³µì‹ë¬¸ì„œ - state-a-components-memory](https://ko.react.dev/learn/state-a-components-memory#)

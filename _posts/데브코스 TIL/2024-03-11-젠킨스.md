---
title: ì  í‚¨ìŠ¤ (Jenkins)
date: 2024-03-11 16:24:00 +09:00
categories: ["ë°ë¸Œì½”ìŠ¤", "ì  í‚¨ìŠ¤"]
tags: []
toc: true
toc_sticky: true
---

## ì  í‚¨ìŠ¤ (Jenkins)

[https://www.jenkins.io/](https://www.jenkins.io/)

ìë°”ë¡œ ì‘ì„±ëœ ì˜¤í”ˆ ì†ŒìŠ¤ ìë™í™” ì„œë²„ì´ë©°, ì§€ì†ì  ì¸ë„ í”„ë¡œì„¸ìŠ¤ë¥¼ êµ¬ì¶•í•˜ëŠ”ë° ì‚¬ìš©ë˜ê³  ìˆìŠµë‹ˆë‹¤. ì¥ì ìœ¼ë¡œëŠ” ìœ ì—°ì„±ê³¼ í™•ì¥ì„±ì´ ìˆìŠµë‹ˆë‹¤.

### ğŸ“˜ì  í‚¨ìŠ¤ íŠ¹ì§•

- ë‹¤ì–‘í•œ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ ì§€ì›
- í”ŒëŸ¬ê·¸ì¸ì„ í†µí•œ í™•ì¥ (ì‚¬ìš©ìê°€ ì§ì ‘ í”ŒëŸ¬ê·¸ì¸ì„ ì‘ì„±í•˜ì—¬ ì  í‚¨ìŠ¤ì˜ ê¸°ëŠ¥ì„ í™•ì¥í•  ìˆ˜ë„ ìˆìŒ)
- ì´ì‹ì„± (ì—¬ëŸ¬ ì¢…ë¥˜ì˜ ì»´í“¨í„°ì—ì„œë¿ë§Œ ì•„ë‹ˆë¼ ì»¨í…Œì´ë„ˆ ë° í´ëŸ¬ìŠ¤í„° í™˜ê²½ì—ì„œë„ ë¶€ë“œëŸ½ê²Œ ì ìš©)
- ëŒ€ë¶€ë¶„ì˜ ì†ŒìŠ¤ê´€ë¦¬ ì‹œìŠ¤í…œ ì§€ì›
- ë¶„ì‚°ì²˜ë¦¬ ì§€ì› (ë§ˆìŠ¤í„°/ìŠ¬ë ˆì´ë¸Œ êµ¬ì¡°ë¥¼ ì‚¬ìš©í•˜ì—¬ ì—¬ëŸ¬ ë…¸ë“œì—ì„œ ì‘ì—…ì„ ìˆ˜í–‰í•˜ë„ë¡ í•¨)
- **ì½”ë“œë¡œ íŒŒì´í”„ë¼ì¸ êµ¬ì„±** (í”„ë¡œì„¸ìŠ¤ ìë™í™”ì— ì í•©í•˜ê²Œ ë§Œë“¤ì–´ì¤Œ)

### ğŸ“˜ì  í‚¨ìŠ¤ ì•„í‚¤í…ì²˜

#### ë§ˆìŠ¤í„° ìŠ¬ë ˆì´ë¸Œ êµ¬ì¡° (ìŠ¬ë ˆì´ë¸ŒëŠ” ì—ì´ì „íŠ¸ë¼ê³  ë¶€ë¥´ê¸°ë„ í•¨)

#### â–  ë§ˆìŠ¤í„°

- ë¹Œë“œ ì‹œì‘ íŠ¸ë¦¬ê±° í¬ì°© (ì½”ë“œ ì»¤ë°‹)
- ì•Œë¦¼ (ë¹Œë“œ ì‹¤íŒ¨ë¥¼ ì‚¬ìš©ìì—ê²Œ ì „ë‹¬)
- í´ë¼ì´ì–¸íŠ¸ì™€ í†µì‹ í•˜ë©° HTTP ìš”ì²­ ì²˜ë¦¬
- ì—ì´ì „íŠ¸ì—ì„œ ì‹¤í–‰ ì¤‘ì¸ ì‘ì—…ì˜ ìš°ì„ ìˆœìœ„ë¥¼ ì¡°ì •í•˜ëŠ” ë“± ë¹Œë“œ í™˜ê²½ì„ ê´€ë¦¬

#### â–  ì—ì´ì „íŠ¸

- ë§ˆìŠ¤í„°ì— ì˜í•œ ê°œì‹œ í›„ ëª¨ë“  ì‘ì—…ì„ ì²˜ë¦¬ (ë¹Œë“œ ë“±)

### ğŸ“˜ìˆ˜í‰ì  í™•ì¥

ê°œë°œíŒ€, í…ŒìŠ¤íŠ¸íŒ€, ë°ìŠ¤ì˜µìŠ¤íŒ€ ë“± ì¡°ì§ì´ ëŠ˜ì–´ë‚  ë•Œ ë§ˆë‹¤ ë§ˆìŠ¤í„° ì¸ìŠ¤í„´ìŠ¤ì˜ ìˆ˜ë¥¼ ëŠ˜ë ¤ê°€ëŠ” ë°©ì‹

#### â–  ìˆ˜ì§ì  í™•ì¥?

ë§ˆìŠ¤í„°ì— ëŒ€í•œ ë¶€í•˜ê°€ ì¦ê°€í•¨ì— ë”°ë¼ ë§ˆìŠ¤í„° ì‹œìŠ¤í…œì— ìì›ì„ ì¶”ê°€í•˜ëŠ” ë°©ì‹

#### â–  ìˆ˜í‰ì  í™•ì¥ì˜ ì¥ì 

- ë§ˆìŠ¤í„° ì—­í• ì„ í•˜ëŠ” ì»´í“¨í„°ì˜ í•˜ë“œì›¨ì–´ ì‚¬ì–‘ì— ëŒ€í•œ ë¶€ë‹´ì´ ê°ì†Œ
- íŒ€ë§ˆë‹¤ ê°ê¸° ë‹¤ë¥¸ ì„¤ì •ì´ ê°€ëŠ¥
- íŒ€ ì „ìš© ë§ˆìŠ¤í„° ì¸ìŠ¤í„´ìŠ¤ê°€ ìˆìœ¼ë¯€ë¡œ íŒ€ì›Œí¬ì™€ ì—…ë¬´ íš¨ìœ¨ì´ ë†’ì•„ì§
- ë§ˆìŠ¤í„° ì¸ìŠ¤í„´ìŠ¤ í•˜ë‚˜ì— ë¬¸ì œê°€ ìƒê²¨ë„ ë‹¤ë¥¸ íŒ€ì— ë¼ì¹˜ëŠ” ì˜í–¥ì´ ìµœì†Œí™”ë¨

#### â–  ìˆ˜í‰ì  í™•ì¥ì˜ ë‹¨ì 

- í†µí•© ìë™í™”ê°€ ë³µì¡í•´ì§

### ğŸ“˜í…ŒìŠ¤íŠ¸ ì¸ìŠ¤í„´ìŠ¤ì™€ í”„ë¡œë•ì…˜ ì¸ìŠ¤í„´ìŠ¤

ì  í‚¨ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ëŠ” **í•­ìƒ í…ŒìŠ¤íŠ¸ìš©ê³¼ í”„ë¡œë•ì…˜ìš©ìœ¼ë¡œ ë¶„ë¦¬ ìš´ìš©**í•´ì•¼í•¨

#### â–  í”„ë¡œë•ì…˜ì— ì ìš©í•˜ê¸° ì´ì „ì— ì² ì €í•œ ê²€ì¦ì„ ê±¸ì³ì•¼ í•˜ëŠ” ì‹œìŠ¤í…œ ì„¤ì •

- ì  í‚¨ìŠ¤ ì†Œí”„íŠ¸ì›¨ì–´ì˜ ì—…ë°ì´íŠ¸
- ì‹ ê·œ í”ŒëŸ¬ê·¸ì¸ ì ìš©
- CI/CD íŒŒì´í”„ë¼ì¸ì˜ ë³€ê²½ ë° ìœ ì§€ë³´ìˆ˜

## CI/CD ì‹œë‚˜ë¦¬ì˜¤

### ğŸ“˜CI (Continuous Integration; ì§€ì†ì  í†µí•©) ë‹¨ê³„

- ì¼ë°˜ì ìœ¼ë¡œ ê°œë°œìê°€ ì†ŒìŠ¤ ì½”ë“œë¥¼ ì»¤ë°‹í•˜ê³  í‘¸ì‹œí•˜ë©´ ì‹œì‘ë¨
- ì‘ìš© ì†Œí”„íŠ¸ì›¨ì–´ë¥¼ ìë™ìœ¼ë¡œ ë¹Œë“œí•˜ê³ , í†µí•©ì‹œí‚´
- í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•˜ê³  ë°°í¬í•  ìˆ˜ ìˆëŠ” ìƒíƒœì„ì„ í™•ì¸í•´ì¤Œ

### ğŸ“˜CD (Continuous Delivery/Deployment; ì§€ì†ì  ì¸ë„) ë‹¨ê³„

- CI ë‹¨ê³„ì—ì„œ ì†Œí”„íŠ¸ì›¨ì–´ê°€ ë°°í¬ê°€ëŠ¥í•œ ìƒíƒœì¼ ë•Œ ì‹œì‘ë¨
- ì‘ìš© ì†Œí”„íŠ¸ì›¨ì–´ë¥¼ ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ë¡œ ë§Œë“¬
- í¬ë“œ, ë””í”Œë¡œì´ë¨¼íŠ¸, ì„œë¹„ìŠ¤ ë“± ë‹¤ì–‘í•œ ì˜¤ë¸Œì íŠ¸ ì¡°ê±´ì— ë§ì¶”ì–´ ë°°í¬í•¨ (ë¯¸ë¦¬ ì„¤ì •í•œ íŒŒì¼ì„ í†µí•´ì„œ)

### ğŸ“˜ì§€ì†ì  í†µí•© íŒŒì´í”„ë¼ì¸ (CI Pipeline)

- ë ˆí¬ì§€í† ë¦¬ì— ì½”ë“œ ì»¤ë°‹ì´ ë°œìƒí•  ë•Œë§ˆë‹¤ ë¹Œë“œ, ë‹¨ìœ„ í…ŒìŠ¤íŠ¸, ì •ì  ë¶„ì„ì„ í•¨

## ì  í‚¨ìŠ¤ ì‚¬ìš©ì„ ìœ„í•œ Helm ì„¤ì¹˜

### ğŸ“˜Helm?

### ğŸ“˜Ubuntu aptì„ ì´ìš©í•œ Helm ì„¤ì¹˜

#### 1. Helmì„ ë°›ì•„ì˜¤ê¸° ìœ„í•œ apt repo ì„¤ì •

```
$ echo "deb [arch=$(dpkg --print-architecture) \
signed-by=/usr/share/keyrings/helm.gpg] \
https://baltocdn.com/helm/stable/debian/ all main" | sudo tee /etc/apt/sources.list.d/helm-stable-debian.list
```

ì„¤ì •ì— ì„±ê³µí•œë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ì€ ë©”ì„¸ì§€ê°€ ì¶œë ¥ë¨

```
deb [arch=amd64 signed-by=/usr/share/keyrings/helm.gpg] https://baltocdn.com/helm/stable/debian/ all main
```

#### 2. Helm íŒ¨í‚¤ì§€ ì„¤ì¹˜

```
$ sudo apt install -y helm
```

ë§Œì•½ ì„¤ì¹˜ì— ì‹¤íŒ¨í•  ê²½ìš° [ê³µì‹ë¬¸ì„œ](https://helm.sh/ko/docs/intro/install/)ì—ì„œ ì•Œë ¤ì£¼ëŠ” ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•´ì„œ ì„¤ì¹˜í•˜ëŠ” ê²ƒì„ ì¶”ì²œí•œë‹¤.

#### 3. helm ì´ìš© ê°€ëŠ¥ í™•ì¸í•˜ê¸°

```
$ which helm
```

- ë©”ì„¸ì§€

```
/usr/sbin/helm
```

#### 4. helmì„ ì´ìš©í•˜ì—¬ repo ì„¤ì •í•˜ê¸°

```
$helm repo add jenkinsci https://charts.jenkins.io
```

- ë©”ì„¸ì§€

```
"jenkinsci" has been added to your repositories
```

#### 5. helm repo ì—…ë°ì´íŠ¸í•˜ê¸°

```
helm repo update
```

- ë©”ì„¸ì§€

```
Hang tight while we grab the latest from your chart repositories...
...Successfully got an update from the "jekinsci" chart repository
Update Complete. âˆHappy Helming!âˆ
```

#### 6. ì  í‚¨ìŠ¨ ì„¤ì¹˜í•˜ê¸°

```
helm install jenkins jenkinsci/jenkins
```

- Error! ë§Œì•½ ì¿ ë²„ë„¤í‹°ìŠ¤ê°€ ì„¤ì¹˜ë˜ì–´ìˆì§€ ì•Šë‹¤ë©´ ëª…ë ¹ì–´ëŠ” ì‹¤í–‰ë˜ì§€ ì•ŠìŒ!

```
Error: INSTALLATION FAILED: Kubernetes cluster unreachable: Get "http://localhost:8080/version": dial tcp 127.0.0.1:8080: connect: connection refused
```

## ì  í‚¨ìŠ¨ ê¸°ë³¸ ì‚¬ìš©ë²•

### ğŸ“˜ì  í‚¨ìŠ¤ ì ‘ì†

```
kubectl port-forward svc/jenkins 8080:8080

Forwarding from 127.0.0.1:8080 -> 8080
Forwarding from [::1]:8080 -> 8080
```

ë¸Œë¼ìš°ì €ì—ì„œ localhost:8080ìœ¼ë¡œ ì ‘ì†í•˜ì—¬ ì´ˆê¸°í™”ë©´ì´ ë‚˜ì˜¤ëŠ” ê²ƒì„ í™•ì¸

![alt text](image.png)

### ğŸ“˜ì  í‚¨ìŠ¤ ë¡œê·¸ì¸

- ê³„ì • `admin`ìœ¼ë¡œ ë¡œê·¸ì¸

#### â–  ë¹„ë°€ë²ˆí˜¸ ì•Œì•„ë‚´ê¸°

```kubectl get secret jenkins -o jsonpath="{.data.jenkins-admin-password}" | base64 --decode &&
 echo
```

- `kubectl get secret jenkins` - base64 ì¸ì½”ë“œë˜ì–´ ì í˜€ìˆìŒ

![alt text](image-1.png)

### ğŸ“˜ì  í‚¨ìŠ¤ ë¹„ë°€ë²ˆí˜¸ ë³€ê²½í•˜ê¸°

Users - Jenkins Admin - Configureì—ì„œ ë³€ê²½í•œ ì‚¬í•­ì€ í¬ë“œê°€ ìƒˆë¡œ ì‹¤í–‰ë  ë•Œ ì ìš©ë˜ì§€ ì•Šì•„ ì›ë˜ ë¹„ë°€ë²ˆí˜¸ë¡œ ë˜ëŒë ¤ì§

```
kubectl get secrets jenkins

NAME      TYPE     DATA   AGE
jenkins   Opaque   2      7h18m
```

```
kubectl edit secrets jenkins

data:
  jenkins-admin-password: a2ZFdnJzcHdDNVAxMzBQRXpBZ3Z2RA==
  jenkins-admin-user: YWRtaW4=
```

ì›í•˜ëŠ” ë¬¸ìì—´ì„ base64ë¡œ ì¸ì½”ë”©í•´ì„œ ì¿ ë²„ë„¤í‹°ìŠ¤ ì„¤ì • íŒŒì¼ì— ì ìš©

```
echo "vmfhrmfoajtm" | base64

dm1maHJtZm9hanRtCg==
```

```
kubectl edit secrets jenkins

data:
  jenkins-admin-password: dm1maHJtZm9hanRtCg==
  jenkins-admin-user: YWRtaW4=

secret/jenkins edited
```

Vim í¸ì§‘ê¸°ë¥¼ ì‚¬ìš©í•˜ê³  ìˆë‹¤ë©´ `:wq`ë¥¼ ì…ë ¥í•˜ê³  ë¹ ì ¸ë‚˜ì˜¤ë©´ ë¨

### ğŸ“˜ì–¸ì–´ ì„¤ì •í•˜ê¸°

- í”ŒëŸ¬ê·¸ì¸ `Locale` ì„¤ì¹˜
- Manage Jenkins - System - Locale

### ğŸ“˜ì‹œê°„ëŒ€ ë³€ê²½í•˜ê¸°

- People - [ê³„ì • ì„ íƒ] - Configure - User Defined Time Zone
